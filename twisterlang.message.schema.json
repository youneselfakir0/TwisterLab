{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://twisterlab.local/schemas/twisterlang.message.v1.json","title":"TwisterLang Message Schema","description":"Schema de validation pour les messages d'orchestration TwisterLang","type":"object","required":["twisterlang_version","message_id","timestamp","sender","target","operation"],"properties":{"twisterlang_version":{"type":"string","pattern":"^v[0-9]+\\.[0-9]+$","description":"Version du protocole TwisterLang (ex: v1.0)"},"message_id":{"type":"string","format":"uuid","description":"Identifiant unique du message"},"timestamp":{"type":"string","format":"date-time","description":"Timestamp ISO 8601"},"sender":{"type":"string","minLength":1,"description":"Nom de l'agent émetteur"},"target":{"type":"string","minLength":1,"description":"Nom de l'agent ou outil destinataire"},"operation":{"type":"string","enum":["audit","backup","classify","resolve","execute","sync","monitor","alert"],"description":"Type d'opération demandée"},"payload":{"type":"object","required":["schema","data"],"properties":{"schema":{"type":"string","description":"Identifiant du schéma de données (ex: twisterlab.audit.v1)"},"data":{"type":"object","description":"Données de l'opération"}}},"encoding":{"type":"object","properties":{"method":{"type":"string","enum":["none","base64","base64+zlib"],"default":"none"},"encoded_payload":{"type":"string","description":"Payload encodé en base64 (optionnel)"}}},"metadata":{"type":"object","required":["correlation_id"],"properties":{"correlation_id":{"type":"string","format":"uuid","description":"ID de corrélation pour traçabilité"},"ttl_seconds":{"type":"integer","minimum":0,"default":86400},"priority":{"type":"string","enum":["low","normal","high","critical"],"default":"normal"}}}}}